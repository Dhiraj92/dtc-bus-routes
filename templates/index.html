<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="Find DTC bus routes">
    <meta name="author" content="Dhiraj Thakur">
    <meta name="keywords" content="dtc, bus, delhi bus, bus routes">

    <link href="{{ STATIC_URL }}css/modern.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}css/modern-responsive.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}css/jquery.autocomplete.css" rel="stylesheet">

    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery19.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.mousewheel.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/tooltip.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/accordion.js"></script>
    <!--<script type="text/javascript" src="{{ STATIC_URL }}js/dropdown.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/buttonset.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/carousel.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/input-control.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/pagecontrol.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/slider.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/tile-slider.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/tile-drag.js"></script>-->
    <script type="text/javascript" src="{{ STATIC_URL }}js/dialog.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/busno.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.autocomplete.min.js"></script>
    
    <script type="text/javascript">
      function func_dialog(message) {
        $.Dialog({
            'title': 'Oops!',
                'content': message,
                'buttons': {
                'Ok': {
                    'action': function () {}
                }

            }
        });
      }

      function validatefeedback() {
        var name = document.getElementsByName('name')[0].value;
        var email = document.getElementsByName('email')[0].value;
        var message = document.getElementsByName('message')[0].value;
       
        var error_message = "Your feedback could not be submitted because:<br />";
        var error_string = "";

        if (!name) {
          error_string += "<br > Name cannot be empty!";
        }
        if (!email) {
          error_string += "<br > Email cannot be empty!";
        }
        else if (email){
          var re = /\S+@\S+\.\S+/;
          if (!re.test(email)){
            error_string += "<br />You entered an invalid email!";
          }
        }
        if (!message) { 
          error_string += "<br > Message cannot be empty!"
        }
        else if (message.length<5) {
          error_string += "<br > You only wrote a few words in the message!"
        };
        if (error_string) {
          func_dialog(error_message+error_string);
        }
        else {
           $.ajax({
              url : "{% url feedback %}",
              type: "POST",
              data : {
                csrfmiddlewaretoken: "{{ csrf_token }}",
                name : name,
                email : email,
                message: message,
              },
              beforeSend: function(){
                $('#formdiv').html('<div><center><img src="{{ STATIC_URL }}images/preloader-w8-cycle-black.gif" id="loading" width=28 height=28/></center></div>');
              },
              success: function( response ){
                  if (response==="OK") {
                    $('#formdiv').html('Thank you for your feedback! :)');
                    success = true;
                  }
                  else {
                    $('#formdiv').html('An error occured! :(');
                    error_string += response;
                  }
              }
          }); 
        }
      }
    </script>
    {% block js %}
    
    {% endblock %}
    
    <title>{% block title %}DTC Bus Routes{% endblock %}</title>

    <style>
    
    
      .container {
        height: 100%;
        padding-top:10px;
        padding-left:6%;
      }
      
      html {
        position: relative;
        min-height: 100%;
      }
      
      body {
        margin: 0 0 80px; /* bottom = footer height */
      }
    
      #footer{
        height: 65px; 
        width:100%;
        position: absolute;
        left: 0;
        bottom: 0;
        background-color: rgb(228, 237, 245);
     }
      
      #footer a{
        color: rgb(82, 83, 85);
        text-decoration:none;
      }
      #footer a:hover{
      
        text-decoration:underline;        
      }

      #feedback {
        padding-top: 4%;
      }
      #formdiv {
        position: relative;
        z-index: 2;
        background-color: white;
      }
            
      {% block css %}
      
      
      
      {% endblock %}
    
    </style>

</head>
<body class="modern-ui" onload=" ">
    <script id="_webengage_script_tag" type="text/javascript">
      var _weq = _weq || {};
      _weq['webengage.licenseCode'] = '14507c365';
      _weq['webengage.widgetVersion'] = "4.0";
      
      (function(d){
        var _we = d.createElement('script');
        _we.type = 'text/javascript';
        _we.async = true;
        _we.src = (d.location.protocol == 'https:' ? "https://ssl.widgets.webengage.com" : "http://cdn.widgets.webengage.com") + "/js/widget/webengage-min-v-4.0.js";
        var _sNode = d.getElementById('_webengage_script_tag');
        _sNode.parentNode.insertBefore(_we, _sNode);
      })(document);
    </script>
    <div class="page secondary">
        <div class="page-header">
            <div class="page-header-content">
                <h1>DTC <a href="{% url home %}"><span style="font-size:45px; color:#91DB39" class="icon-bus"></span></a>
                Routes
                </h1>
                {% if form %}
                <div class="span4 offset12" id="feedback">
                  <ul class="accordion" data-role="accordion">
                    <li>
                      <a href="#"> Feedback </a>
                      <div id="formdiv">
                          <div class="input-control text">
                              Name : {{ form.name }}
                              E-mail : {{ form.email }}
                              Message: {{ form.message }}
                          </div>
                        <button class="default" onclick="validatefeedback()">Submit</button>
                      </div>
                      </div>
                    </li>
                  </ul>
                </div>
                {% endif %} 
            </div>
        </div>
        
        {% block body %}
      
        {% endblock %}
        
        
     
    </div>
      
      {% block share %}
      
      {% endblock %}
     
    <div id="footer">
    
      <div class="container offset6">
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
      <a href="http://www.djangoproject.com/"><img src="{{ STATIC_URL }}images/djimg.gif" border="0" alt="A Django project." title="A Django project." /></a><br />     
       <a href="https://github.com/dhirajt/dtc-bus-routes/blob/master/LICENCE">License</a>
       | <a href="https://github.com/dhirajt/dtc-bus-routes/blob/master/DISCLAIMER">Disclaimer</a> | <a href="https://github.com/dhirajt/dtc-bus-routes/issues">Bug Reports</a>
      </div>
    </div>
    
    </body>
    
</html>
