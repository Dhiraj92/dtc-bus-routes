!function(o){o.Dialog=function(i){if(o.DialogOpened)return!1;o.DialogOpened=!0,i=o.extend({position:{zone:"center"},overlay:!0},i);var t="<div";t+=i.buttonsAlign?' style=" float: '+i.buttonsAlign+';">':">",o.each(i.buttons,function(o,i){t+="<button>"+o+"</button>",i.action||(i.action=function(){})}),t+="</div>";var e=['<div id="dialogOverlay">','<div id="dialogBox" class="dialog">','<div class="header">',i.title,i.closeButton?'<div><button><i class="icon-cancel-2"></i></button></div>':"","</div>",'<div class="content">',i.content,"</div>",'<div class="action" id="dialogButtons">',t,"</div></div></div>"].join("");o(e).hide().appendTo("body").fadeIn(),i.overlay||o("#dialogOverlay").css("background-color","rgba(255, 255, 255, 0)"),"left"==i.position.zone?(o("#dialogBox").css("top",Math.max(0,(o(window).height()-o("#dialogBox").outerHeight())/3+o(window).scrollTop())+"px"),o("#dialogBox").css("left",0)):"right"==i.position.zone?(o("#dialogBox").css("top",Math.max(0,(o(window).height()-o("#dialogBox").outerHeight())/3+o(window).scrollTop())+"px"),o("#dialogBox").css("left",Math.max(0,o(window).width()-o("#dialogBox").outerWidth()+o(window).scrollLeft())+"px")):(o("#dialogBox").css("top",i.position.offsetY?i.position.offsetY:Math.max(0,(o(window).height()-o("#dialogBox").outerHeight())/3+o(window).scrollTop())+"px"),o("#dialogBox").css("left",i.position.offsetX?i.position.offsetX:Math.max(0,(o(window).width()-o("#dialogBox").outerWidth())/2+o(window).scrollLeft())+"px")),i.draggable&&o("#dialogBox div.header").css("cursor","move").on("mousedown",function(i){var t=o(this).addClass("active-handle").parent().addClass("draggable"),e=t.css("z-index"),a=t.outerHeight(),n=t.outerWidth(),d=t.offset().top+a-i.pageY,s=t.offset().left+n-i.pageX;t.css("z-index",99999).parents().on("mousemove",function(i){o(".draggable").offset({top:i.pageY+d-a,left:i.pageX+s-n}).on("mouseup",function(){o(this).removeClass("draggable").css("z-index",e)})}),i.preventDefault()}).on("mouseup",function(){o(this).removeClass("active-handle").parent().removeClass("draggable")}),o("#dialogBox .header button").click(function(){return o.Dialog.hide(),!1});var a=o("#dialogBox .action button"),n=0;o.each(i.buttons,function(i,t){a.eq(n++).click(function(){return t.action(),o.Dialog.hide(),!1})})},o.Dialog.hide=function(){o("#dialogOverlay").fadeOut(function(){o.DialogOpened=!1,o(this).remove()})}}(jQuery);
